!function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)}(function(t,e){var a=1e3,n=!1,i=t([]),o=function(){u.resume()},m=function(a,n){var o=a.data("livestampdata");if("number"==typeof n&&(n*=1e3),a.removeAttr("data-livestamp").removeData("livestamp"),n=e(n),e.isMoment(n)&&!isNaN(+n)){var m=t.extend({},{original:a.contents()},o);m.moment=e(n),a.data("livestampdata",m).empty(),i.push(a[0])}},r=function(){n||(u.update(),setTimeout(r,a))},u={update:function(){t("[data-livestamp]").each(function(){var e=t(this);m(e,e.data("livestamp"))});var a=[];i.each(function(){var n=t(this),i=n.data("livestampdata");if(void 0===i)a.push(this);else if(e.isMoment(i.moment)){var o=n.html(),m=i.moment.fromNow();if(o!=m){var r=t.Event("change.livestamp");n.trigger(r,[o,m]),r.isDefaultPrevented()||n.html(m)}}}),i=i.not(a)},pause:function(){n=!0},resume:function(){n=!1,r()},interval:function(t){return void 0===t?a:void(a=t)}},s={add:function(a,n){return"number"==typeof n&&(n*=1e3),n=e(n),e.isMoment(n)&&!isNaN(+n)&&(a.each(function(){m(t(this),n)}),u.update()),a},destroy:function(e){return i=i.not(e),e.each(function(){var a=t(this),n=a.data("livestampdata");return void 0===n?e:void a.html(n.original?n.original:"").removeData("livestampdata")}),e},isLivestamp:function(t){return void 0!==t.data("livestampdata")}};t.livestamp=u,t(o),t.fn.livestamp=function(t,e){return s[t]||(e=t,t="add"),s[t](this,e)}});